'use strict';
const { randomUUID } = require('crypto');
module.exports={async up(q){const now=new Date();const cohortId=randomUUID();const jsId=randomUUID();const reactId=randomUUID();const w1=randomUUID();const w2=randomUUID();const w3=randomUUID();await q.bulkInsert('cohorts',[{id:cohortId,title:'Web Development Cohort',slug:'web-dev-101',timezone:'UTC',start_date:new Date('2026-04-01T00:00:00Z'),end_date:new Date('2026-06-30T00:00:00Z'),enrollment_close_hours:48,late_join_enabled:true,late_join_days:7,amount_minor:150000,currency:'NGN',created_at:now,updated_at:now}]);await q.bulkInsert('courses',[{id:jsId,title:'JavaScript Fundamentals',slug:'javascript',created_at:now,updated_at:now},{id:reactId,title:'React Fundamentals',slug:'react',created_at:now,updated_at:now}]);await q.bulkInsert('cohort_courses',[{id:randomUUID(),cohort_id:cohortId,course_id:jsId,position:1,created_at:now,updated_at:now},{id:randomUUID(),cohort_id:cohortId,course_id:reactId,position:2,created_at:now,updated_at:now}]);await q.bulkInsert('weeks',[{id:w1,cohort_id:cohortId,week_number:1,title:'Week 1',opens_at:new Date('2026-04-01T00:00:00Z'),created_at:now,updated_at:now},{id:w2,cohort_id:cohortId,week_number:2,title:'Week 2',opens_at:new Date('2026-04-08T00:00:00Z'),created_at:now,updated_at:now},{id:w3,cohort_id:cohortId,week_number:3,title:'Week 3',opens_at:new Date('2026-04-15T00:00:00Z'),created_at:now,updated_at:now}]);const l1=randomUUID(),l2=randomUUID(),l3=randomUUID();await q.bulkInsert('lessons',[{id:l1,course_id:jsId,week_id:w1,title:'JS Basics',slug:'js-basics',position:1,s3_key:'videos/js-basics.mp4',duration_seconds:600,created_at:now,updated_at:now},{id:l2,course_id:jsId,week_id:w1,title:'Functions',slug:'js-functions',position:2,s3_key:'videos/js-functions.mp4',duration_seconds:700,created_at:now,updated_at:now},{id:l3,course_id:reactId,week_id:w2,title:'React Intro',slug:'react-intro',position:1,s3_key:'videos/react-intro.mp4',duration_seconds:800,created_at:now,updated_at:now}]);await q.bulkInsert('lesson_prerequisites',[{id:randomUUID(),lesson_id:l2,prerequisite_lesson_id:l1,created_at:now,updated_at:now}]);await q.bulkInsert('discussion_threads',[{id:randomUUID(),cohort_id:cohortId,week_id:w1,title:'Week 1 Discussion',created_at:now,updated_at:now},{id:randomUUID(),cohort_id:cohortId,week_id:w2,title:'Week 2 Discussion',created_at:now,updated_at:now},{id:randomUUID(),cohort_id:cohortId,week_id:w3,title:'Week 3 Discussion',created_at:now,updated_at:now}]);},async down(q){for(const t of ['discussion_threads','lesson_prerequisites','lessons','weeks','cohort_courses','courses','cohorts']) await q.bulkDelete(t,null,{});}};
